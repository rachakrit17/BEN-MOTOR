<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <title>แนะนำการซ่อม BEN MOTOR</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <!-- Main style -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body class="bm-app theme-light">
    <!-- Top gradient bar -->
    <header class="bm-topbar-gradient">
      <div class="container d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-2">
          <button
            type="button"
            class="btn btn-light btn-sm rounded-circle px-2 me-1"
            onclick="history.back()"
            aria-label="ย้อนกลับ"
          >
            <i class="bi bi-arrow-left"></i>
          </button>
          <div>
            <h1 class="bm-topbar-title mb-0">
              แนะนำการซ่อม BEN MOTOR
            </h1>
            <div class="bm-topbar-subtitle">
              รวมอาการเสียยอดฮิต ทั้งออโต้ / 4T / 2T พร้อมแนวทางเช็กแบบช่าง
            </div>
          </div>
        </div>

        <div class="d-none d-md-flex flex-column text-end small">
          <span>คู่มือภายในอู่ BEN MOTOR</span>
          <span class="text-light opacity-75">
            ใช้เป็นแนวทางเบื้องต้น – ต้องอาศัยประสบการณ์ร่วมด้วย
          </span>
        </div>
      </div>
    </header>

    <main class="container py-3 py-md-4">
      <!-- Search + filter card -->
      <div class="bm-card mb-3">
        <div class="bm-card-body">
          <div class="mb-3">
            <label for="repairSearchInput" class="form-label small mb-1">
              ค้นหาอาการ (พิมพ์คำไหนก็ได้ เช่น “ควันขาว”, “เร่งไม่ขึ้น”, “เบรกหอน”)
            </label>
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-search"></i>
              </span>
              <input
                type="search"
                id="repairSearchInput"
                class="form-control"
                placeholder="ค้นหาจากชื่ออาการ, คำที่ลูกค้าพูด, ระบบที่เสีย"
                autocomplete="off"
              />
            </div>
          </div>

          <div>
            <div class="bm-field-label mb-1">
              เลือกหมวดอาการ
            </div>
            <div id="repairCategoryChips" class="d-flex flex-wrap gap-1">
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill active"
                data-category="all"
              >
                ทั้งหมด
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="ไฟฟ้า"
              >
                ระบบไฟ / สตาร์ต
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="เชื้อเพลิง"
              >
                น้ำมันเชื้อเพลิง / หัวฉีด / คาร์บู
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="เครื่อง4T"
              >
                เครื่องยนต์ 4 จังหวะ
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="เครื่อง2T"
              >
                เครื่องยนต์ 2 จังหวะ
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="ออโต้"
              >
                ออโต้ / สายพาน / CVT
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="ช่วงล่างเบรก"
              >
                ช่วงล่าง / เบรก / ยาง
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="ส่งกำลัง"
              >
                คลัทช์ / เกียร์ / โซ่สเตอร์
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary rounded-pill"
                data-category="อื่นๆ"
              >
                อื่น ๆ / รวมอาการ
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Summary -->
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div class="small text-muted">
          ผลลัพธ์ทั้งหมด:
          <span id="repairTotalCount" class="fw-semibold">0</span>
          รายการ
        </div>
        <div class="small text-muted">
          แตะ “ดูรายละเอียด” เพื่ออ่านขั้นตอนตรวจเช็กทีละข้อ
        </div>
      </div>

      <!-- Tips list -->
      <div id="repairTipsList" class="row g-3 mb-4"></div>

      <div
        id="repairNoResult"
        class="bm-empty-state mt-3 d-none"
      >
        ยังไม่พบอาการที่ตรงกับคำค้น ลองพิมพ์คำอื่น เช่น
        “ไม่ติด”, “เร่งไม่ขึ้น”, “เบรกหอน”, “ควันขาว”
      </div>
    </main>

    <!-- Detail modal -->
    <div
      class="modal fade"
      id="repairTipDetailModal"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <div>
              <h5 class="modal-title" id="repairDetailTitle">
                รายละเอียดอาการ
              </h5>
              <div
                id="repairDetailMeta"
                class="small text-muted mt-1"
              ></div>
            </div>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <h6 class="fw-semibold mb-1">อาการโดยสรุป</h6>
              <p id="repairDetailSymptom" class="mb-0"></p>
            </div>

            <div class="mb-3">
              <h6 class="fw-semibold mb-1">สาเหตุที่เป็นไปได้</h6>
              <ul
                id="repairDetailCauses"
                class="mb-0 ps-3"
              ></ul>
            </div>

            <div class="mb-3">
              <h6 class="fw-semibold mb-1">
                ขั้นตอนตรวจเช็กที่แนะนำ
              </h6>
              <ol
                id="repairDetailChecks"
                class="mb-0 ps-3"
              ></ol>
            </div>

            <div class="mb-3">
              <h6 class="fw-semibold mb-1">
                แนวทางแก้ไข / งานที่ควรทำ
              </h6>
              <ul
                id="repairDetailFixes"
                class="mb-0 ps-3"
              ></ul>
            </div>

            <div class="small text-muted" id="repairDetailNotes"></div>
          </div>
          <div class="modal-footer">
            <div class="me-auto small text-muted">
              * ใช้เป็นแนวทางเท่านั้น – การซ่อมจริงต้องดูสภาพรถและประวัติการใช้งานร่วมด้วย
            </div>
            <button
              type="button"
              class="btn btn-outline-secondary btn-sm"
              data-bs-dismiss="modal"
            >
              ปิด
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- Repair tips logic -->
    <script src="js/repair-tips.js"></script>
  </body>
</html>